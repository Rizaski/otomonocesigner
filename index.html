<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otomono Jersey - Customize Your Jersey</title>
    <script>
        // Auto-detect base path for GitHub Pages subdirectory
        const basePath = window.location.pathname.split('/').slice(0, -1).join('/') || '';
        window.basePath = basePath;
    </script>
    <link rel="icon" type="image/png" href="./public/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@300;400;500;600;700;800&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <div class="loading-text">
                <p class="loading-title">Otomono Jersey</p>
                <p class="loading-subtitle">Loading your customization experience...</p>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-logo">
            <img src="./public/logo.png" alt="Otomono Logo" id="headerLogo">
        </div>
    </header>

    <!-- Main Container -->
    <main class="main-container">
        <!-- Jersey Canvas Area -->
        <section class="canvas-section">
            <div class="canvas-wrapper">
                <!-- Canvas Overlay Controls -->
                <div class="canvas-overlay">
                    <!-- Side Navigation -->
                    <div class="side-nav">
                        <button class="nav-btn active" data-side="front" title="Front">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" />
                                <line x1="12" y1="3" x2="12" y2="21" />
                            </svg>
                        </button>
                        <button class="nav-btn" data-side="back" title="Back">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" />
                                <path d="M9 9h6v6H9z" />
                            </svg>
                        </button>
                    </div>

                    <!-- Color Palette Toggle -->
                    <button class="overlay-toggle" id="colorPaletteToggle" title="Color Palette">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="13.5" cy="6.5" r=".5" />
                            <circle cx="17.5" cy="10.5" r=".5" />
                            <circle cx="8.5" cy="7.5" r=".5" />
                            <circle cx="6.5" cy="12.5" r=".5" />
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c.55 0 1-.45 1-1v-4H9v-2h4v-2H9v-2h5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1z" />
                            <path d="M19 11h-2V9h-2v2h-2v2h2v2h2v-2h2v-2z" />
                        </svg>
                    </button>

                    <!-- Pattern Palette Toggle -->
                    <button class="overlay-toggle" id="patternPaletteToggle" title="Patterns">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7" />
                            <rect x="14" y="3" width="7" height="7" />
                            <rect x="14" y="14" width="7" height="7" />
                            <rect x="3" y="14" width="7" height="7" />
                        </svg>
                    </button>

                    <!-- Reload Jerseys Button -->
                    <button class="overlay-toggle reload-btn" id="reloadJerseysBtn" title="Reload Jerseys">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6" />
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                        </svg>
                    </button>

                    <!-- Reset Button -->
                    <button class="overlay-toggle reset-btn" id="resetBtn" title="Reset Design">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" />
                            <path d="M21 3v5h-5" />
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" />
                            <path d="M3 21v-5h5" />
                        </svg>
                    </button>

                    <!-- Save Button -->
                    <button class="overlay-toggle save-btn" id="saveBtn" title="Save Design">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
                            <polyline points="17,21 17,13 7,13 7,21" />
                            <polyline points="7,3 7,8 15,8" />
                        </svg>
                    </button>
                </div>

                <!-- Canvas -->
                <canvas id="jerseyCanvas"></canvas>
            </div>

            <!-- Color Palette Overlay -->
            <div class="palette-overlay" id="colorPaletteOverlay">
                <div class="palette-content">
                    <h3>Color Palette</h3>
                    <div class="color-grid" id="colorGrid">
                        <!-- Colors will be generated by JS -->
                    </div>
                    <button class="close-btn" id="closeColorPalette">Close</button>
                </div>
            </div>

            <!-- Pattern Palette Overlay -->
            <div class="palette-overlay" id="patternPaletteOverlay">
                <div class="palette-content">
                    <h3>Pattern Palette</h3>
                    <div class="pattern-grid" id="patternGrid">
                        <!-- Patterns will be loaded by JS -->
                    </div>
                    <button class="close-btn" id="closePatternPalette">Close</button>
                </div>
            </div>
        </section>

        <!-- Control Panel -->
        <aside class="control-panel" id="controlPanel">
            <!-- Front Side Controls -->
            <div class="panel-section active" data-side="front">
                <h3>Front Customization</h3>

                <div class="control-group">
                    <label>Upload Logo</label>
                    <input type="file" id="logoUpload" accept="image/*" class="file-input">
                    <div class="file-preview" id="logoPreview"></div>
                </div>

                <div class="control-group" id="logoControls" style="display: none;">
                    <label>Logo Size</label>
                    <input type="range" id="logoSize" min="50" max="300" value="150" class="slider">
                    <span class="value-display" id="logoSizeValue">150px</span>

                    <label>Logo Position X</label>
                    <input type="range" id="logoPosX" min="0" max="400" value="200" class="slider">
                    <span class="value-display" id="logoPosXValue">200px</span>

                    <label>Logo Position Y</label>
                    <input type="range" id="logoPosY" min="0" max="400" value="100" class="slider">
                    <span class="value-display" id="logoPosYValue">100px</span>

                    <label>Logo Brightness</label>
                    <input type="range" id="logoBrightness" min="0" max="200" value="100" class="slider">
                    <span class="value-display" id="logoBrightnessValue">100%</span>

                    <label>Logo Contrast</label>
                    <input type="range" id="logoContrast" min="0" max="200" value="100" class="slider">
                    <span class="value-display" id="logoContrastValue">100%</span>
                </div>
            </div>

            <!-- Back Side Controls -->
            <div class="panel-section" data-side="back">
                <h3>Back Customization</h3>

                <div class="control-group">
                    <label>Player Name</label>
                    <input type="text" id="playerName" placeholder="Enter player name" class="text-input">
                </div>

                <div class="control-group">
                    <label>Player Number</label>
                    <input type="number" id="playerNumber" placeholder="00" min="0" max="99" class="number-input">
                </div>

                <div class="control-group">
                    <label>Name Size</label>
                    <input type="range" id="nameSize" min="20" max="80" value="40" class="slider">
                    <span class="value-display" id="nameSizeValue">40px</span>

                    <label>Name Position X</label>
                    <input type="range" id="namePosX" min="0" max="400" value="200" class="slider">
                    <span class="value-display" id="namePosXValue">200px</span>

                    <label>Name Position Y</label>
                    <input type="range" id="namePosY" min="0" max="400" value="250" class="slider">
                    <span class="value-display" id="namePosYValue">250px</span>

                    <label>Name Color</label>
                    <input type="color" id="nameColor" value="#000000" class="color-input">
                </div>

                <div class="control-group">
                    <label>Number Size</label>
                    <input type="range" id="numberSize" min="50" max="200" value="120" class="slider">
                    <span class="value-display" id="numberSizeValue">120px</span>

                    <label>Number Position X</label>
                    <input type="range" id="numberPosX" min="0" max="400" value="200" class="slider">
                    <span class="value-display" id="numberPosXValue">200px</span>

                    <label>Number Position Y</label>
                    <input type="range" id="numberPosY" min="0" max="400" value="150" class="slider">
                    <span class="value-display" id="numberPosYValue">150px</span>

                    <label>Number Color</label>
                    <input type="color" id="numberColor" value="#000000" class="color-input">
                </div>
            </div>

            <!-- Color & Pattern Controls (Global) -->
            <div class="panel-section" id="colorPatternSection">
                <h3>Color & Pattern</h3>

                <div class="control-group">
                    <label>Jersey Base Color</label>
                    <input type="color" id="jerseyBaseColor" value="#ffffff" class="color-input">
                </div>

                <div class="control-group">
                    <label>Pattern Position X</label>
                    <input type="range" id="patternPosX" min="0" max="400" value="0" class="slider">
                    <span class="value-display" id="patternPosXValue">0px</span>

                    <label>Pattern Position Y</label>
                    <input type="range" id="patternPosY" min="0" max="400" value="0" class="slider">
                    <span class="value-display" id="patternPosYValue">0px</span>

                    <label>Pattern Scale</label>
                    <input type="range" id="patternScale" min="50" max="200" value="100" class="slider">
                    <span class="value-display" id="patternScaleValue">100%</span>

                    <label>Pattern Rotation</label>
                    <input type="range" id="patternRotation" min="0" max="360" value="0" class="slider">
                    <span class="value-display" id="patternRotationValue">0Â°</span>

                    <label>Pattern Opacity</label>
                    <input type="range" id="patternOpacity" min="0" max="100" value="100" class="slider">
                    <span class="value-display" id="patternOpacityValue">100%</span>
                </div>

                <div class="control-group">
                    <label>Color Opacity</label>
                    <input type="range" id="colorOpacity" min="0" max="100" value="100" class="slider">
                    <span class="value-display" id="colorOpacityValue">100%</span>

                    <label>Color Brightness</label>
                    <input type="range" id="colorBrightness" min="0" max="200" value="100" class="slider">
                    <span class="value-display" id="colorBrightnessValue">100%</span>

                    <label>Color Contrast</label>
                    <input type="range" id="colorContrast" min="0" max="200" value="100" class="slider">
                    <span class="value-display" id="colorContrastValue">100%</span>
                </div>
            </div>
        </aside>
    </main>

    <script src="script.js"></script>
</body>

</html>